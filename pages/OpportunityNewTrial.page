<apex:page StandardController="Opportunity"
    extensions="OpportunityNewTrialController"
    action="{!getContactsOfOpportunityRecord}" id="pageId"
    showHeader="false">

    <apex:form >
        <apex:actionFunction name="methodOneInJavascript">

        </apex:actionFunction>
        <apex:outputPanel id="counterStatus">
            <apex:pageMessages />
        </apex:outputPanel>
        <apex:pageBlock rendered="{!relatedContactsList.size>0}">
            <apex:pageBlockButtons >

                <apex:commandButton action="{!validateFields}" value="New Trial" rerender="counterStatus">


                </apex:commandButton>
                <apex:commandButton onClick="window.top.close();" value="Cancel" />
            </apex:pageBlockButtons>

            <apex:pageBlocksection title="{!$Label.CreateNewQuotePageBlockSectionToChooseContact}"
                collapsible="false" columns="1">

                <apex:pageBlockTable value="{!relatedContactsList}"
                    var="ContactRole">

                    <apex:column headervalue="Select Contact" width="50px">
                        <apex:outputPanel >
                            <apex:actionsupport action="{!selectContact}" event="onclick"
                                rerender="counterStatus" status="counterStatus">
                                <apex:pageBlockSectionItem rendered="{!((ContactRole.isPrimary) &&  prevselContactid==null )}">
                                    <input type="radio" name="<strong>selectRadio</strong>"
                                        id="primary" Checked="true" status="status" />
                                </apex:pageBlockSectionItem>
                                <apex:pageBlockSectionItem rendered="{!((!ContactRole.isPrimary) &&  prevselContactid==null) }">
                                    <input type="radio" name="<strong>selectRadio</strong>"
                                        id="primary" />
                                </apex:pageBlockSectionItem>

                                


                                <apex:param name="contactId" value="{!ContactRole.contact.id}"
                                    assignTo="{!selContactid}">
                                </apex:param>
                            </apex:actionsupport>
                        </apex:outputPanel>
                        <apex:actionstatus id="counterStatus">
                            <apex:facet name="start">
                                <div class="waitingSearchDiv" id="el_loading"
                                    style="background-color: #fbfbfb; height: 100%; opacity: 0.65; width: 100%;">
                                    <div class="waitingHolder"
                                        style="top: 74.2px; opacity: 1.0; width: 91px;">
                                        <img class="waitingImage" src="/img/loading.gif"
                                            title="Please Wait..." /> <span class="waitingDescription">Processing.....</span>
                                    </div>
                                </div>
                            </apex:facet>
                        </apex:actionstatus>
                    </apex:column>


                    <apex:column value="{!ContactRole.contact.name}" />
                    <apex:column value="{!ContactRole.isPrimary}" />

                </apex:pageBlockTable>

            </apex:pageBlocksection>
            <apex:pageBlocksection title="{!$Label.CreateNewQuotePageBlockSectionForOpportunityProduct}"
                collapsible="false" columns="1"
                rendered="{!opportunityLineItemList.size>0}">
                <apex:pageBlockTable value="{!opportunityLineItemList}"
                    var="lineItems">
                    <apex:repeat value="{!$ObjectType.OpportunityLineItem.FieldSets.OpportunityProduct}"
                        var="fieldsToShow">
                        <apex:column value="{!lineItems[fieldsToShow]}">

                        </apex:column>

                    </apex:repeat>
                </apex:pageBlockTable>
            </apex:pageBlocksection>
        </apex:pageBlock>

        <apex:outputPanel rendered="{!relatedContactsList.size==0}">
            <apex:pageBlock >
                <h3 style="color: red; font: 12px">There should be contact
                    roles to Opportunity for creating trials</h3>
            </apex:pageBlock>
        </apex:outputPanel>

    </apex:form>

</apex:page>